# [아이템 69] 예외는 진짜 예외 상황에만 사용하라

작성자: 김가영

작성일: 2022년 8월 11일

---

### **예외를 사용하여 반복문을 제어할 때의 단점.**

→ 예외는 예외 상황에 쓸 용도로 설계되어야 한다는 규칙(?)을 어긴 것.

1. 성능 저하
    1. 코드를 try-catch 블록 안에 넣으면 JVM 이 적용할 수 있는 최적화가 제한
2. 코드가 복잡해진다.
3. 반복문이 돌때 `ArrayIndexOutOfBoundsException` 가 아닌 다른 예외가 발생해도, 정상적으로 배열의 반복이 끝난 줄 아는 문제가 생긴다.

### **예외를 일상적인 제어 흐름에 사용하는 것은 절대 NO!**

1. 코드가 무엇을 하는지 알기 힘들다.
2. 성능에도 큰 도움이 되지 않는다.
3. 의도치 않은 오작동을 야기할 수 있다.

### 잘 설계된 API 라면, 클라이언트가 정상적인 제어 흐름에서 예외를 사용할 일이 없게 해야 한다.

상태 의존적 메서드와 상태 검사 메서드를 통해 정상적 제어 흐름에서만 사용할 수 있도록 도와야한다.

- 상태 의존적 메서드 : 특정 상태에서만 호출할 수 있는 메서드
- 상태 검사 메서드 : 상태를 검사하는 메서드

(위 두 메서드는 함께 제공해야 한다.)

<aside>
💡 Ex)  Iterator 인터페이스에서 상태 의존적 메서드는 next(), 상태 검사 메서드는 hasNext()

</aside>

---

---

## 핵심 정리

- 예외를 정상 흐름에서 제어를 위해 사용하면 안된다.
- 정상 흐름에서 제어하기 위해 예외를 사용해야하는 API 를 만들면 안된다.
    - 위와 같은 경우에는 상태 의존적 메서드, 옵셔널, 특정값 반환등의 방법을 제공하여 설계하자.
