# [아이템 54] null이 아닌, 빈 컬렉션이나 배열을 반환하라

작성자: 박성민

작성일: 2022년 7월 14일

---

## null 반환의 문제

- null을 반환한다면, 클라이언트는 null 상황을 처리해주는 코드를 추가로 작성해야 한다.
  - 당연히 이 null을 처리해주는 코드가 없으면 오류가 발생할 수 있다.

### 빈 컨테이너 할당의 성능저하?

- 빈 컨테이너를 할당하는 데 드는 비용은 성능 저하의 주범이라고 확인되지 않는 한, 이 정도의 성능 차이는 신경 쓸 수준이 되지 못 된다.
- 빈 컬렉션과 배열은 새로 할당하지 않고도 반환 가능하다.
- 빈 컬렉션 할당이 성능을 눈에 띄게 떨어뜨리는 경우도 아주 가끔 있다.
  - 이때는 매번 똑같은 ‘불변’ 컬렉션을 반환하면 된다.
    - ex) `Collections.emptyList`, `Collections.emptySet`, `Collections.emptyMap`
- 배열도 마찬가지로 길이가 0인 배열을 반환하자.
  - 이거도 마찬가지로 성능을 떨어뜨릴 것 같다면 길이 0인 배열을 미리 선언해두고 매번 이 배열만 반환하자. 길이 0인 배열은 모두 불변이다.

## 정리

- null이 아닌, 빈 배열이나 컬렉션을 반환하자.
- null을 반환하는 API는 사용하기 어렵고 오류 처리 코드도 늘어난다. 그렇다고 성능이 좋지도 않다.
