# [아이템 21] 인터페이스는 구현하는 쪽을 생각해 설계하라

작성자: 김대희

작성일: 2022년 5월 3일

---

## 인터페이스에 메서드를 추가하는 것

- 자바 8 전에는 인터페이스에 메서드를 추가하면, 컴파일 오류가 나기 때문에 추가할 방법이 없었다.
- 자바 8 이후에는 디폴트 메서드가 추가되어 새로운 기능을 추가할 수 있다.
    - 하지만, 인터페이스를 구현했지만 디폴트 메서드를 재정의하지 않은 모든 클래스에서 디폴트 구현이 쓰이게 된다.
        - 기존의 구현체들과 매끄럽게 연동되리라는 보장이 없게 된다
        - 자바8 Collection 인터페이스에 removeIf 메서드의 예) SynchronizedCollection 클래스에서 모든 메서드들에 대한 동기화를 보장하지 않게 됨.
    - 자바 플랫폼 라이브러리가 이러한 문제를 예방하기 위한 조치
        - 구현한 인터페이스의 디폴트 메서드를 재정의하고, 다른 메서드에서는 디폴트 메서드를 호출하기 전에 필요한 작업을 수행하도록 했다.

## 디폴트 메서드는 기존 구현체에 런타임 오류를 일으킬 수 있다.

- 따라서, 기존 인터페이스에 디폴트 메서드로 새 메서드를 추가한 일은 꼭 필요한 경우가 아니면 피해야 한다.
- 또한, 디폴트 메서드가 기존 구현체들과 충돌하지 않을지 심사숙고해야한다.
- 기존 구현체가 없는 새 인터페이스를 설계하는 경우라면 아주 유용한 수단이 될 수 있다.

<aside>
💡 디폴트 메서드가 있지만 인터페이스를 설계할 때에는 세심한 주의를 기울여야하고, 인터페이스를 릴리스하기 전에 결함을 찾아내야 한다. 릴리스 후에도 수정하는게 가능할 수도 있겠지만 그 가능성에 절대 기대서는 안된다.

</aside>