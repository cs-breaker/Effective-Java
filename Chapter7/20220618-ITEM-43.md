# 아이템 43. 람다보다는 메서드 참조를 사용하라

람다가 익명 클래스보다 나은 점 중에서 가장 큰 특징은 간결함이다. 하지만 메서드 참조를 통해 람다보다도 함수 객체를 간결하게 만들 수 있다.

임의의 키와 Integer 값의 매핑을 관리하는 프로그램의 일부다. 이 코드는 키가 맵 안에 없다면 키와 숫자 1을 매핑하고, 이미 있다면 기존 매핑 값을 증가시킨다.

```java
// 키가 맵 안에 없다면 키와 숫자 1을 매핑하고, 이미 있다면 기존 매핑 값을 증가시킨다.
map.merge(key, 1, (count, incr) -> count + incr);

// 자바 8 때 Map에 추가된 merge 메서드를 사용했다. merge 메서드는 키, 값, 함수를 인수로
// 받으며, 주어진 키가 맵 안에 아직 없다면 주어진 {키, 값} 쌍을 그대로 저장한다.
// 반대로 키가 이미 있다면 인수로 받은 함수를 현재 값과 주어진 값에 적용한 다음,
// 그 결과로 현재 값을 덮어쓴다. 즉, 맵에 {키, 함수의 결과} 쌍을 저장한다.
```

## 메서드 참조

깔끔해보이는 코드지만 아직 거추장스러운 부분이 남아 있다.

- 매개변수인 count와 incr은 크게 하는 일 없이 공간을 차지한다.
- 이 람다는 두 인수의 합을 단순히 반환할 뿐이다.

⇒ 자바 8에 추가된 Integer 클래스에는 이 람다와 기능이 같은 정적 메서드 sum을 제공한다.

## 메서드 참조의 장점

- 가독성(똑같은 결과를 더 보기 좋게 얻을 수 있다)
- 매개변수 수가 늘어날수록 메서드 참조로 제거할 수 있는 코드양도 늘어난다

```java
map.merge(key, 1, Integer::sum);
```

## 람다로 할 수 없는 일이라면 메서드 참조로도 할 수 없다

하지만 메서드 참조를 사용하는 편이 보통은 더 짧고 간결하므로, 람다로 구현했을 때 너무 길거나 복잡하다면 메서드 참조가 좋은 대안이 되어준다. 메서드 참조에는 기능을 잘 드러내는 이름을 지어줄 수 있고 친절한 설명을 문서로 남길 수도 있다.

# 메서드 참조 유형

| 메서드 참조 유형 | 예 | 같은 기능을 하는 람다 |
| --- | --- | --- |
| 정적 | Integer::parseInt | str → Integer.parseInt(str) |
| 한정적 (인스턴스) | Instant.now()::isAfter | Instant then = Instant.now();
t → then.isAfter(t) |
| 비한정적 (인스턴스) | String::toLowerCase | str → str.toLowerCase() |
| 클래스 생성자 | TreeMap<K, V>::new | () → new TreeMap<K, V>() |
| 배열 생성자 | int[]::new | len → new int[len] |